<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Painel do Laboratório</title>
  <style>
    body {
      margin: 0;
      background-color: #f2f2f2;
      font-family: 'Segoe UI', sans-serif;
      color: #004775;
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 5px;
      height: 100vh;
      padding: 5px;
      box-sizing: border-box;
    }
    .box {
      border-radius: 10px;
      background-color: #3d3d3d;
      padding: 10px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      font-size: 14px;
      color: #ffffff;
      position: relative;
    }
    h2 {
      font-size: 16px;
      margin: 0 0 10px;
      color: #ffffff;
      z-index: 10;
    }
    iframe {
      width: 100%;
      border: none;
    }
    ul {
      padding-left: 16px;
      margin: 0;
      font-size: 28px;
    }
    .rss-box {
      overflow-y: auto;
      flex: 1;
    }
    .rss-box iframe {
      height: 100%;
    }
    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .carousel-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      min-height: 250px;
      overflow: hidden;
      border-radius: 10px;
    }
    .carousel-slide {
      display: none;
      width: 100%;
      height: 100%;
    }
    .carousel-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .prev, .next {
      display: none;
    }

    /* Camada das bolinhas */
    #bouncing-area {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 9999;
      pointer-events: none;
    }
    .bouncing {
      position: absolute;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 3px solid white;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <div class="grid">
    <div class="box">
      <h2>Notícias de Astronomia</h2>
      <div class="rss-box">
        <iframe src="https://www.universetoday.com/" title="Universe Today"></iframe>
      </div>
    </div>

    <div class="box">
      <h2>Imagens do Projeto</h2>
      <div class="carousel-container" style="display: block;">
        <div class="carousel-slide">
          <img src="https://i.imgur.com/H1VDjrL.png" alt="Imagem 1">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/OtYwGT8.png" alt="Imagem 2">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/0IKJEv1.png" alt="Imagem 3">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/jlA2uvU.png" alt="Imagem 4">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/jsACFuk.png" alt="Imagem 5">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/ZpjOTrs.png" alt="Imagem 6">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/wr50ViL.png" alt="Imagem 7">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/xuUpGzP.png" alt="Imagem 8">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/FfRmpSy.png" alt="Imagem 9">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/xgYNzTI.png" alt="Imagem 10">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/dvln20A.png" alt="Imagem 11">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/QlUrRPJ.png" alt="Imagem 12">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/JobkDQR.png" alt="Imagem 13">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/W3llLqs.png" alt="Imagem 14">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/UkAURxc.png" alt="Imagem 15">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/fe5NfaQ.png" alt="Imagem 16">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/GW9LSUH.png" alt="Imagem 17">
        </div>
        <div class="carousel-slide">
          <img src="https://i.imgur.com/F10XAEM.png" alt="Imagem 18">
        </div>
      </div>
    </div>

    <div class="box">
      <h2>Horário dos Participantes</h2>
      <video id="videoHorario" autoplay muted loop playsinline></video>
    </div>

    <div class="box">
      <h2>Tarefas do Laboratório</h2>
      <ul>
        <li>WORKSHOP ✅</li>
        <li>SAB RESUMOS 10/06 ✅</li>
        <li>SUBMISSÕES DE TRABALHO PARA O EFNN 30/06</li>
        <li>XLVIII REUNIÃO ANUAL DA SOCIEDADE ASTRONÔMICA BRASILEIRA 28/09 - 02/10</li>
        <li>XXXIX ENCONTRO DE FÍSICA NORTE NORDESTE 26-28/11</li>
      </ul>
    </div>
  </div>

  <div id="bouncing-area"></div>

  <script>
    // Horário
    const videoHorario = document.getElementById('videoHorario');
    const diasUteis = ["Seg", "Ter", "Qua", "Qui", "Sex"];

    function updateHorarioVideo() {
      const dia = new Date().getDay();
      if (dia >= 1 && dia <= 5) {
        const nomeDia = diasUteis[dia - 1];
        videoHorario.src = `videos/Horario${nomeDia}.mp4`;
      } else {
        videoHorario.src = `videos/HorarioSeg.mp4`;
      }
      videoHorario.load();
    }
    function scheduleMidnightReload() {
      const now = new Date();
      const midnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0, 0);
      const timeToMidnight = midnight.getTime() - now.getTime();
      setTimeout(() => window.location.reload(true), timeToMidnight);
    }
    updateHorarioVideo();
    scheduleMidnightReload();

    // Carrossel
    let slideIndex = 1;
    let slideInterval;
    function showSlides(n) {
      let slides = document.getElementsByClassName("carousel-slide");
      if (n > slides.length) {slideIndex = 1}
      if (n < 1) {slideIndex = slides.length}
      for (let i = 0; i < slides.length; i++) slides[i].style.display = "none";
      slides[slideIndex-1].style.display = "block";
    }
    function plusSlides(n) {
      clearInterval(slideInterval);
      showSlides(slideIndex += n);
      startSlideShow();
    }
    function startSlideShow() {
      slideInterval = setInterval(() => plusSlides(1), 5000);
    }
    document.addEventListener("DOMContentLoaded", function() {
      showSlides(slideIndex);
      startSlideShow();
    });

    // Bolinhas
    const fotos = [
      "https://i.pinimg.com/236x/73/14/cc/7314cc1a88bf3cdc48347ab186e12e81.jpg",
      "https://i.pinimg.com/236x/73/14/cc/7314cc1a88bf3cdc48347ab186e12e81.jpg",
      "https://i.pinimg.com/236x/73/14/cc/7314cc1a88bf3cdc48347ab186e12e81.jpg",
      "https://i.pinimg.com/236x/73/14/cc/7314cc1a88bf3cdc48347ab186e12e81.jpg",
      "https://i.pinimg.com/236x/73/14/cc/7314cc1a88bf3cdc48347ab186e12e81.jpg",
      "https://i.pinimg.com/236x/73/14/cc/7314cc1a88bf3cdc48347ab186e12e81.jpg"
    ];
    let bolinhas = [];
    function criarBolinha(fotoURL) {
      const img = document.createElement("img");
      img.src = fotoURL;
      img.classList.add("bouncing");
      document.getElementById("bouncing-area").appendChild(img);
      bolinhas.push({
        el: img,
        x: Math.random() * (window.innerWidth - 80),
        y: Math.random() * (window.innerHeight - 80),
        dx: (Math.random() < 0.5 ? -1 : 1) * 2,
        dy: (Math.random() < 0.5 ? -1 : 1) * 2
      });
    }

    // AQUI ESTÁ A FUNÇÃO CORRIGIDA
    function moverBolinhas() {
      const ballSize = 80; // Tamanho da bolinha
      const areaWidth = window.innerWidth;
      const areaHeight = window.innerHeight;

      for (let i = 0; i < bolinhas.length; i++) {
          let b = bolinhas[i];
          b.x += b.dx;
          b.y += b.dy;

          // Correção da colisão com as paredes
          // Parede esquerda
          if (b.x < 0) {
              b.x = 0; // Reposiciona na borda
              b.dx *= -1;
          } 
          // Parede direita
          else if (b.x > areaWidth - ballSize) {
              b.x = areaWidth - ballSize; // Reposiciona na borda
              b.dx *= -1;
          }

          // Parede de cima
          if (b.y < 0) {
              b.y = 0; // Reposiciona na borda
              b.dy *= -1;
          } 
          // Parede de baixo
          else if (b.y > areaHeight - ballSize) {
              b.y = areaHeight - ballSize; // Reposiciona na borda
              b.dy *= -1;
          }

          // Colisão entre as bolinhas
          for (let j = i + 1; j < bolinhas.length; j++) {
              let b2 = bolinhas[j];
              let dx = b2.x - b.x;
              let dy = b2.y - b.y;
              let dist = Math.sqrt(dx * dx + dy * dy);
              if (dist < ballSize) {
                  let tempDx = b.dx, tempDy = b.dy;
                  b.dx = b2.dx; b.dy = b2.dy;
                  b2.dx = tempDx; b2.dy = tempDy;
                  
                  let overlap = ballSize - dist;
                  let pushX = (dx / dist) * (overlap / 2);
                  let pushY = (dy / dist) * (overlap / 2);
                  b.x -= pushX; b.y -= pushY;
                  b2.x += pushX; b2.y += pushY;
              }
          }

          b.el.style.left = b.x + "px";
          b.el.style.top = b.y + "px";
      }
      requestAnimationFrame(moverBolinhas);
    }

    fotos.forEach(f => criarBolinha(f));
    moverBolinhas();
  </script>
</body>
</html>
